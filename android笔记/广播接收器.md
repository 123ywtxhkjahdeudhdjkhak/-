一、广播

定义：Android的广播是一种跨进程的通讯方式，可分为：

标准广播：

定义：标准广播是一种完全异步执行的广播，在广播发出后，所有的广播接收器几乎同一时刻接收到这条广播消息，因此它们没有先后顺序，这种广播效率高，但缺点是无法被截断。

有序广播：

定义：有序广播是一种同步执行的广播，在广播发出后，同一时刻只会有一个广播接收器能够收到这条广播消息，只有当这个广播接收器中的逻辑处理完后，广播才会继续传递。因此此时的广播接收器是有先后顺序的，优先级高的广播接收器就可以先接收到消息，并且前面的广播接收器可以截断广播，截断后后面的广播接收器就无法收到广播消息了。

系统广播：

定义：Android内置很多系统级别的广播，可以通过监听这些广播来得到系统的状态信息。如开机、电量发生变化、时间或时区发生变化都会发送对应的系统广播。

本地广播：

定义：一般发送的广播属于系统全局广播，即发送的广播可以被其他任何应用程序接收。为了让广播只能在应用程序内部传递，并且广播接收器也只能接收到来自本应用程序发出的广播，Android引入了一套本地广播机制。

创建普通广播接收器实现：新建一个继承BroadcastReceiver的子类，并重写父类中的onReceive()方法，该方法会传入一个Intent参数，根据该参数判断接受到的是哪种广播并执行相应的逻辑。之后将该广播接收器通过动态或静态的方式注册需要监听的广播，当接收器监听到对应注册的广播后就会调用onReceive()方法。部分涉及用户安全和隐私的操作可能还需要在清单文件中添加权限。

普通广播发送：创建一个带有action的Intent对象，并调用Context类中的sendBroadcast()方法，并将Intent对象传入。

静态注册广播监听：

实现：在AndroidManifest.xml注册清单文件中注册。在清单文件中注册广播接收器并添加需要监听的广播

使用场景：需要在程序未启动的情况下能够接收到广播

动态注册广播监听：

实现：需要在代码中注册。通常会在Activity初始化onCreate()时创建一个IntentFilter的实例，并调用该实例中的addAction(String)添加广播，然后调用Context类中的registerReceiver()方法并传入IntentFilte实例和BroadcastReceiver实例。通常为了避免内存泄漏，动态注册的广播接收器一般需要取消注册，通常在Activity的onDestroy方法中调用Context类中unregisterReceiver()方法，并传入需要取消注册的BroadcastReceiver实例。

优点：能够灵活控制注册和注销

缺点：必须得程序启动后且执行到注册广播监听后才能接收到广播

有序广播发送：跟普通广播一样，不过只需要将sendBroadcast()方法换成Context类中的sendOrderedBroadcast()方法，该方法有多个重载方法，通常调用有两个参数的，该方法第一个参数与普通广播发送方式一样都是带有action的Intent对象，第二个参数是跟权限相关的字符串。

有序广播的注册：跟普通广播一样，不过此时可以给IntentFilter设置优先级，优先级高的会先接收，接收后可以在onReceive()方法中调用abortBroadcast()方法，将该广播阻断，后面的接收器就没法再收到这条广播。

本地广播的实现：主要使用LocalBroadcastManager来对广播进行处理，其他步骤都和普通广播的接收发送一样，区别在于发送广播时不是调用Context类中的sendBroadcast()方法，而是先调用LocalBroadcastManager中的getInstance()静态方法并传入一个Context实例来获取LocalBroadcastManager实例，然后调用该LocalBroadcastManager实例中的sendBroadcast()方法，该方法跟Context类中的sendBroadcast()方法参数一样都是带action的Intent实例。接收本地广播注册方式只有动态注册，需要调用LocalBroadcastManager实例中的registerReceiver()方法并传入广播接收器和IntentFilter实例，这两个参数和普通广播动态接收一样。

本地广播的优点：安全，高效。



